{"version":3,"sources":["uni-app:///main.js","webpack:///E:/program/web/​​06​​uni-app实战直播app全栈开发​​​​​​/源码【】/【完整】前端代码（含自定义基座）【】【 海量资源尽在：www.wo21.top】/pages/live/live.nvue?2d52","webpack:///E:/program/web/​​06​​uni-app实战直播app全栈开发​​​​​​/源码【】/【完整】前端代码（含自定义基座）【】【 海量资源尽在：www.wo21.top】/pages/live/live.nvue?662d","webpack:///E:/program/web/​​06​​uni-app实战直播app全栈开发​​​​​​/源码【】/【完整】前端代码（含自定义基座）【】【 海量资源尽在：www.wo21.top】/pages/live/live.nvue?1b7e","webpack:///E:/program/web/​​06​​uni-app实战直播app全栈开发​​​​​​/源码【】/【完整】前端代码（含自定义基座）【】【 海量资源尽在：www.wo21.top】/pages/live/live.nvue?b931","uni-app:///pages/live/live.nvue","webpack:///E:/program/web/​​06​​uni-app实战直播app全栈开发​​​​​​/源码【】/【完整】前端代码（含自定义基座）【】【 海量资源尽在：www.wo21.top】/pages/live/live.nvue?cf80","webpack:///E:/program/web/​​06​​uni-app实战直播app全栈开发​​​​​​/源码【】/【完整】前端代码（含自定义基座）【】【 海量资源尽在：www.wo21.top】/pages/live/live.nvue?7051","webpack:///E:/program/web/​​06​​uni-app实战直播app全栈开发​​​​​​/源码【】/【完整】前端代码（含自定义基座）【】【 海量资源尽在：www.wo21.top】/pages/live/live.nvue?fd27","webpack:///E:/program/web/​​06​​uni-app实战直播app全栈开发​​​​​​/源码【】/【完整】前端代码（含自定义基座）【】【 海量资源尽在：www.wo21.top】/pages/live/live.nvue?4ca3"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","fGift","fDanmu","uniPopup","data","id","detail","sign","statusBarHeight","content","gifts","giftActiveId","list","onLoad","$H","item","uni","mounted","destroyed","computed","socket","token","src","methods","handleLiveEvent","name","d","joinOrLeaveLive","live_id","sendGift","title","icon","url","gift_id","back","delta","openGift","closeGift","openInput","submit","openCoin"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;AACA;;;AAGjE;AACwL;AACxL,gBAAgB,gMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA;AAA8rB,CAAgB,8sBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACqKltB;AACA;AACA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;UACA;UACA;UACA;QACA;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;IACA;EACA;EACAC;IAAA;IACA;IACA;IACA;IAEAC;MACA;MACA;IACA;IAEAA;MACA;QACAC;QACA;MACA;IACA;IACA;IACAC;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACAF;EACA;EACAG,0CACA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;EACA;IACAC;MACA;QACA;MACA;MACA;IACA;EAAA,EACA;EACAC;IACAC;MACA;MACA;QACA;UACA;YACA;UACA;UACA;QACA;UACA;YACAnB;YACAoB;YACAhB;UACA;UACA;UACA;UACA;QACA;UACAiB;UACA;UACA;UACA;UACA;QACA;UACA;MAAA;IAEA;IACA;IACAC;MACA;QACA;UACAC;UACAP;QACA;MACA;IACA;IACAQ;MAAA;MACA;QACA;UACAC;UACAC;QACA;MACA;MACA;QAAA;MAAA;MACA;QACA;MACA;MACA;MAEA;QACAf;UACAgB;QACA;QACA;UACAF;UACAC;QACA;MACA;MAEA;QACA;UACAH;UACAK;UACAZ;QACA;MACA;IACA;IACAa;MACAlB;QACAmB;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACA;UACAT;UACAC;QACA;MACA;MAEA;QACAf;UACAgB;QACA;QACA;UACAF;UACAC;QACA;MACA;MAEA;QACA;UACAH;UACAxB;UACAiB;QACA;MACA;IAEA;IACAmB;MACAxB;QACAgB;MACA;IACA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;AClYA;AAAA;AAAA;AAAA;AAAs/B,CAAgB,y+BAAG,EAAC,C;;;;;;;;;;;ACA1gC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAs/B,CAAgB,y+BAAG,EAAC,C;;;;;;;;;;;ACA1gC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/live/live.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/live/live.nvue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./live.nvue?vue&type=template&id=1127cb58&\"\nvar renderjs\nimport script from \"./live.nvue?vue&type=script&lang=js&\"\nexport * from \"./live.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./live.nvue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./live.nvue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/live/live.nvue\"\nexport default component.exports","export * from \"-!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=template&id=1127cb58&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.list.length\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event, item) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n      var _temp, _temp2\n      _vm.giftActiveId = item.id\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=script&lang=js&\"","<style>\n  view,\n  label,\n  swiper-item,\n  scroll-view {\n    display:flex;\n    flex-direction:column;\n    flex-shrink: 0;\n    flex-grow: 0;\n    flex-basis: auto;\n    align-items: stretch;\n    align-content: flex-start;\n  }\n  view,\n  image,\n  input,\n  scroll-view,\n  swiper,\n  swiper-item,\n  text,\n  textarea,\n  video {\n    position: relative;\n    border: 0px solid #000000;\n    box-sizing: border-box;\n  }\n  swiper-item {\n    position: absolute;\n  }\n  button {\n    margin: 0;\n  }\n</style>\n<template>\n\t<view class=\"page\">\n\t\t\r\n\t\t<video class=\"flex-1\" :src=\"src\" autoplay :controls=\"false\"></video>\r\n\t\t\r\n\t\t<!-- 头部 -->\r\n\t\t<view style=\"position: fixed;left: 0;right: 0;\" :style=\"'top:'+statusBarHeight+'px'\">\r\n\t\t\t<!-- 个人信息|观看详细信息 -->\r\n\t\t\t<view style=\"height: 80rpx;\" class=\"px-2 flex justify-between align-center\">\r\n\t\t\t\t<view style=\"width: 325rpx;background-color: rgba(0,0,0,0.4);\" class=\"flex rounded-circle\">\r\n\t\t\t\t\t<view class=\"p\">\r\n\t\t\t\t\t\t<image :src=\"detail.user.avatar || '/static/tabbar/min.png'\" style=\"width: 70rpx;height: 70rpx;\" class=\"rounded-circle\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex-1 flex flex-column justify-center\">\r\n\t\t\t\t\t\t<text class=\"text-white font\">{{ detail.user.username }}</text>\r\n\t\t\t\t\t\t<text class=\"text-white font-sm\">{{ detail.look_count }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"p\">\r\n\t\t\t\t\t\t<view class=\"rounded-circle flex align-center justify-center bg-danger\" style=\"width: 70rpx;height: 70rpx;\">\r\n\t\t\t\t\t\t\t<text class=\"text-white\">+</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view style=\"width: 325rpx;background-color: rgba(0,0,0,0.4);\" class=\"flex rounded-circle\">\r\n\t\t\t\t\t<!-- 实时在线观看用户情况 -->\r\n\t\t\t\t\t<scroll-view scroll-x=\"true\" class=\"flex-1 flex\">\r\n\t\t\t\t\t\t<view class=\"p\" v-for=\"(item,index) in list\" :key=\"index\">\r\n\t\t\t\t\t\t\t<image :src=\"item.avatar || '/static/tabbar/min.png'\" style=\"width: 70rpx;height: 70rpx;\" class=\"rounded-circle\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t<view class=\"p\">\r\n\t\t\t\t\t\t<view class=\"rounded-circle flex align-center justify-center bg-danger\" style=\"width: 70rpx;height: 70rpx;\">\r\n\t\t\t\t\t\t\t<!-- 实时在线观看人数 -->\r\n\t\t\t\t\t\t\t<text class=\"text-white font-sm\">{{ list.length }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 金币 -->\r\n\t\t\t<view style=\"height: 80rpx;\" class=\"px-2 my-2\">\r\n\t\t\t\t<view style=\"width: 325rpx;background-color: rgba(0,0,0,0.4);\" class=\"flex rounded-circle align-center\">\r\n\t\t\t\t\t<view class=\"p\">\r\n\t\t\t\t\t\t<text class=\"text-warning\">金币</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex-1 flex flex-column justify-center\">\r\n\t\t\t\t\t\t<text class=\"text-white font\">{{ detail.coin }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 收到礼物 -->\r\n\t\t\t<f-gift ref=\"gift\"></f-gift>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 弹幕 -->\r\n\t\t<f-danmu ref=\"danmu\"></f-danmu>\r\n\t\t\r\n\t\t<!-- 底部 -->\r\n\t\t<view style=\"position: fixed;left: 0;bottom: 0;right: 0;height: 120rpx;\" class=\"flex align-center justify-between\">\r\n\t\t\t<view class=\"px-2\">\r\n\t\t\t\t<view class=\"btn px-3\" @click=\"openInput\">\r\n\t\t\t\t\t<text class=\"text-white font\">说点什么...</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t<view class=\"btn btn-icon\" @click=\"openCoin\">\r\n\t\t\t\t\t<text class=\"iconfont text-white\" style=\"font-size: 40px;\">&#xe633;</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"btn btn-icon bg-warning\" @click=\"openGift\">\r\n\t\t\t\t\t<text class=\"iconfont\">&#xe67c;</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- <view class=\"btn btn-icon\">\r\n\t\t\t\t\t<text class=\"iconfont text-white\">&#xe7cd;</text>\r\n\t\t\t\t</view> -->\r\n\t\t\t\t<view class=\"btn btn-icon\" @click=\"back\">\r\n\t\t\t\t\t<text class=\"iconfont text-white\">&#xe607;</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t\r\n\t\t<!-- 输入框弹出层 -->\r\n\t\t<uni-popup type=\"bottom\" ref=\"input\">\r\n\t\t\t<view class=\"bg-white flex align-center px-3\" style=\"height: 120rpx;\">\r\n\t\t\t\t<input type=\"text\" v-model=\"content\" class=\"border rounded flex-1 px-3 font-md\" placeholder=\"说点什么...\" style=\"height: 80rpx;\"/>\r\n\t\t\t\t<view class=\"flex align-center justify-center py-2 px-2 ml-3 rounded\" @click=\"submit\" :class=\"content === '' ? 'bg-main-disabled' : 'bg-main'\">\r\n\t\t\t\t\t<text class=\"font text-white\">发送</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t\t\r\n\t\t<!-- 送礼物弹出层 -->\r\n\t\t<uni-popup type=\"bottom\" ref=\"giftPopup\">\r\n\t\t\t<view class=\"bg-white\" style=\"width: 750rpx;height: 550rpx;\">\r\n\t\t\t\t<view style=\"height: 100rpx;\" class=\"flex justify-between align-center\">\r\n\t\t\t\t\t<text class=\"text-main font-md ml-3\">礼物</text>\r\n\t\t\t\t\t<view class=\"flex align-center justify-center\" style=\"width: 100rpx;height: 100rpx;\" @click=\"closeGift\">\r\n\t\t\t\t\t\t<text class=\"iconfont\">&#xe607;</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<swiper :indicator-dots=\"true\" :duration=\"500\" style=\"height: 350rpx;\" class=\"border-bottom border-top\">\r\n\t\t\t\t\t<swiper-item>\r\n\t\t\t\t\t\t<view class=\"flex flex-wrap\">\r\n\t\t\t\t\t\t\t<view style=\"width: 187.5rpx;height: 175rpx;\" class=\"flex flex-column justify-center align-center\" v-for=\"(item,index) in gifts\" :key=\"index\" :class=\"giftActiveId === item.id ? 'border border-main' : ''\" @click=\"giftActiveId = item.id\">\r\n\t\t\t\t\t\t\t\t<image :src=\"item.image\" style=\"width: 100rpx;height: 100rpx;\"></image>\r\n\t\t\t\t\t\t\t\t<view class=\"flex mt-1\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"text-warning font mr-1\">{{item.name}}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"text-secondary font\">{{item.coin}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</swiper-item>\r\n\t\t\t\t</swiper>\r\n\t\t\t\t<view style=\"height: 100rpx;\" class=\"flex align-center justify-end\">\r\n\t\t\t\t\t<view class=\"flex align-center justify-center py-2 px-2 mr-3 rounded bg-warning\" @click=\"openCoin\">\r\n\t\t\t\t\t\t<text class=\"font\">充值</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex align-center justify-center py-2 px-2 mr-3 rounded bg-main\" @click=\"sendGift\">\r\n\t\t\t\t\t\t<text class=\"font text-white\">发送</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t\t\r\n\t\t\n\t</view>\n</template>\n\n<script>\r\n\timport fGift from '@/components/live/f-gift.vue';\r\n\timport fDanmu from '@/components/live/f-danmu.vue';\r\n\timport uniPopup from '@/components/uni-ui/uni-popup/uni-popup.vue';\r\n\timport $H from '@/common/request.js';\r\n\timport $C from '@/common/config.js';\r\n\timport { mapState } from 'vuex'\r\n\t\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tfGift,\r\n\t\t\tfDanmu,\r\n\t\t\tuniPopup\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tid:0,\r\n\t\t\t\tdetail:{\r\n\t\t\t\t\t\"created_time\": \"\",\r\n\t\t\t\t\t\"id\": 1,\r\n\t\t\t\t\t\"title\": \"\",\r\n\t\t\t\t\t\"cover\": \"\",\r\n\t\t\t\t\t\"user_id\": 0,\r\n\t\t\t\t\t\"look_count\": 0,\r\n\t\t\t\t\t\"coin\": 0,\r\n\t\t\t\t\t\"key\": \"\",\r\n\t\t\t\t\t\"status\": 0,\r\n\t\t\t\t\t\"userId\": 0,\r\n\t\t\t\t\t\"user\": {\r\n\t\t\t\t\t\t\"id\": 0,\r\n\t\t\t\t\t\t\"username\": \"\",\r\n\t\t\t\t\t\t\"avatar\": \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsign:\"\",\n\t\t\t\tstatusBarHeight:0,\r\n\t\t\t\tcontent:\"\",\r\n\t\t\t\tgifts:[],\r\n\t\t\t\tgiftActiveId:0,\r\n\t\t\t\t\r\n\t\t\t\t// 在线用户列表\r\n\t\t\t\tlist:[]\n\t\t\t}\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tthis.id = e.id\r\n\t\t\tlet res = uni.getSystemInfoSync()\r\n\t\t\tthis.statusBarHeight = res.statusBarHeight\r\n\t\t\t\r\n\t\t\t$H.get('/live/read/' + this.id).then(res=>{\r\n\t\t\t\tthis.detail = res.data\r\n\t\t\t\tthis.sign = res.sign\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t$H.get('/gift/list').then(res=>{\r\n\t\t\t\tthis.gifts = res.map(item=>{\r\n\t\t\t\t\titem.image = $C.baseUrl + item.image\r\n\t\t\t\t\treturn item\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t// 监听全局事件\r\n\t\t\tuni.$on('live',this.handleLiveEvent)\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// 送礼物演示\r\n\t\t\t// setInterval(()=>{\r\n\t\t\t// \tthis.$refs.gift.send({\r\n\t\t\t// \t\tusername:\"发送人\",\r\n\t\t\t// \t\tavatar:\"\",\r\n\t\t\t// \t\tgift_name:\"蛋糕\",\r\n\t\t\t// \t\tgift_image:\"/static/gift/3.png\",\r\n\t\t\t// \t\tnum:1\r\n\t\t\t// \t})\r\n\t\t\t// },3000)\r\n\t\t\t\r\n\t\t\t// 发送弹幕演示\r\n\t\t\t// let id = 1\r\n\t\t\t// setInterval(()=>{\r\n\t\t\t// \tthis.$refs.danmu.send({\r\n\t\t\t// \t\tid:id,\r\n\t\t\t// \t\tname:\"昵称\"+id,\r\n\t\t\t// \t\tcontent:\"测试内容\"+id\r\n\t\t\t// \t})\r\n\t\t\t// \tid++\r\n\t\t\t// },3000)\r\n\t\t\t// 加入直播间\r\n\t\t\tthis.joinOrLeaveLive('join')\r\n\t\t},\r\n\t\tdestroyed() {\r\n\t\t\t// 离开直播间\r\n\t\t\tthis.joinOrLeaveLive('leave')\r\n\t\t\t// 移除全局事件\r\n\t\t\tuni.$off('live',this.handleLiveEvent)\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tsocket:state=>state.socket,\r\n\t\t\t\ttoken:state=>state.token\r\n\t\t\t}),\r\n\t\t\tsrc() {\r\n\t\t\t\tif(this.detail.key == '' || this.sign == ''){\r\n\t\t\t\t\treturn ''\r\n\t\t\t\t}\r\n\t\t\t\treturn `${$C.livePlayBaseUrl}/live/${this.detail.key}.flv?sign=${this.sign}`\r\n\t\t\t}\r\n\t\t},\n\t\tmethods: {\r\n\t\t\thandleLiveEvent(e){\r\n\t\t\t\tlet d = e.data\r\n\t\t\t\tswitch (e.type){\r\n\t\t\t\t\tcase 'online':\r\n\t\t\t\t\tif(d.action === 'join'){\r\n\t\t\t\t\t\tthis.list = d.data\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'comment':\r\n\t\t\t\t\tthis.$refs.danmu.send({\r\n\t\t\t\t\t\tid:d.id,\r\n\t\t\t\t\t\tname:d.user.name,\r\n\t\t\t\t\t\tcontent:d.content\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.content = ''\r\n\t\t\t\t\tthis.$refs.input.close()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'gift':\r\n\t\t\t\t\td.gift_image = $C.imageUrl + d.gift_image\r\n\t\t\t\t\tthis.detail.coin += d.gift_coin * d.num\r\n\t\t\t\t\tthis.$refs.gift.send(d)\r\n\t\t\t\t\tthis.closeGift()\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 加入或离开直播间\r\n\t\t\tjoinOrLeaveLive(type){\r\n\t\t\t\tif(this.socket && this.token){\r\n\t\t\t\t\tthis.socket.emit( type + 'Live',{\r\n\t\t\t\t\t\tlive_id:this.id,\r\n\t\t\t\t\t\ttoken:this.token\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsendGift(){\r\n\t\t\t\tif(this.giftActiveId === 0){\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择要发送的礼物',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tlet index = this.gifts.findIndex(item=>item.id === this.giftActiveId)\r\n\t\t\t\tif(index === -1){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet g = this.gifts[index]\r\n\t\t\t\t\r\n\t\t\t\tif(!this.token && !this.socket){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../login/login',\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '请先登录',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(this.socket){\r\n\t\t\t\t\tthis.socket.emit('gift',{\r\n\t\t\t\t\t\tlive_id:this.id,\r\n\t\t\t\t\t\tgift_id:g.id,\r\n\t\t\t\t\t\ttoken:this.token\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tback(){\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\topenGift(){\r\n\t\t\t\tthis.$refs.giftPopup.open()\r\n\t\t\t},\r\n\t\t\tcloseGift(){\r\n\t\t\t\tthis.$refs.giftPopup.close()\r\n\t\t\t},\n\t\t\topenInput(){\r\n\t\t\t\tthis.$store.dispatch('authMethod',()=>{\r\n\t\t\t\t\tthis.$refs.input.open()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 发送弹幕\r\n\t\t\tsubmit(){\r\n\t\t\t\tif(this.content === ''){\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '评论内容不能为空',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(!this.token && !this.socket){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../login/login',\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '请先登录',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.socket){\r\n\t\t\t\t\tthis.socket.emit('comment',{\r\n\t\t\t\t\t\tlive_id:this.id,\r\n\t\t\t\t\t\tdata:this.content,\r\n\t\t\t\t\t\ttoken:this.token\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\topenCoin(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../coin/coin'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\n\t\t}\n\t}\n</script>\n\n<style>\n.page{\r\n\tflex: 1;\r\n}\r\n.btn{\r\n\theight: 80rpx;\r\n\tborder-radius: 100rpx;\r\n\tbackground-color: rgba(255,255,255,0.12);\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n.btn-icon{\r\n\twidth: 80rpx;\r\n\tmargin-right: 20rpx;\r\n}\n</style>\n","import mod from \"-!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1697864743117\n      var cssReload = require(\"F:/program/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\program\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=style&index=1&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1697864743114\n      var cssReload = require(\"F:/program/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}